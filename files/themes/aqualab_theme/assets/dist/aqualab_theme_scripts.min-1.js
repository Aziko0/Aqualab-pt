/*!
 * Aqualab_theme Version 1.0.0 (http://aqualab_theme.com)
 * Copyright 2014-2020 Kobu Creative Digital Agency
 * Licensed under GPL-2.0 (http://www.gnu.org/licenses/gpl-2.0.html)
 */
!function(g){"use strict";var u='<svg width="104" height="104" viewBox="0 0 104 104" version="1.1" xmlns="http://www.w3.org/2000/svg"><g transform="translate(2 2)" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><circle stroke="#FAFAFA" stroke-width="2" cx="50" cy="50" r="50"/><path fill="#FAFAFA" d="M32 74L77 50 32 26z"/></g></svg>',l='<button class="slick-prev slick-arrow" aria-label="'+_theme_config.strings.previous+'" type="button" style="display: block;"><span class="sr-only">'+_theme_config.strings.previous+'</span><svg width="35" height="53" viewBox="0 0 35 53" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#426EAD" fill-rule="nonzero" transform="matrix(0 -1 -1 0 43.728 43.728)" d="M-0.393398282 9L-8.87867966 17.4852814 17.363961 43.7279221 43.6066017 17.4852814 35.1213203 9 17.363961 26.7573593z" stroke="none" stroke-width="1"/></svg></button>',r='<button class="slick-next slick-arrow" aria-label="'+_theme_config.strings.next+'" type="button" style="display: block;"><span class="sr-only">'+_theme_config.strings.next+'</span><svg width="35" height="53" viewBox="0 0 35 53" version="1.1" xmlns="http://www.w3.org/2000/svg"><path fill="#426EAD" fill-rule="nonzero" transform="rotate(-90 17.364 26.364)" d="M17.363961 26.7573593L-0.393398282 9 -8.87867966 17.4852814 17.363961 43.7279221 43.6066017 17.4852814 35.1213203 9z" stroke="none" stroke-width="1"/></svg></button>',c=g("#header"),d=g("body"),e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);function f(t){t.target.pauseVideo();var e=g(t.target.getIframe()).attr("id"),n=v[e].wrapperid,o=g("#"+n);g("#"+e).attr("title",t.target.getVideoData().title),o.removeClass("loading"),g(document.body).on("click","#"+n+" .video-placeholder",function(){var e=g("#"+n+" .play-video-btn");o.addClass("loading"),t.target.playVideo(),e.focus()}),g(document.body).on("click","#"+n+" .play-video-btn",function(){o.hasClass("paused")?(o.addClass("loading"),t.target.playVideo()):t.target.pauseVideo(),o.toggleClass("paused")})}function m(e){var t=g(e.target.getIframe()).attr("id"),n=v[t].wrapperid,o=g("#"+n+" .play-video-btn");e.data==YT.PlayerState.PLAYING?(o.attr("aria-label",_theme_config.strings.pause_video),g("#"+n).removeClass("loading paused")):(o.attr("aria-label",_theme_config.strings.play_video),g("#"+n).addClass("paused"))}function h(e){var t=g(e.target.getIframe()).attr("id"),n=v[t].wrapperid;g("#"+n).removeClass("paused loading"),g("#"+n+" .play-video-btn").remove()}var v={},w={};window.onYouTubeIframeAPIReady=function(){var p;p=0,g(".embed-container").each(function(){var e,t,n,o,i=g(this),a=i.find(".iframe");if(i.addClass("paused loading"),e='<button type="button" class="play-video-btn" aria-label="'+_theme_config.strings.play_video+'">'+u+"</button>",i.prepend(e),n=i.find(".play-video-btn"),t="wrapper_"+(o="player_"+p),a.attr("id",o),i.attr("id",t),i.hasClass("youtube")){var s=a.attr("data-iframe-src"),l=window.location.origin,r=a.attr("data-iframe-start");v[o]={video:new YT.Player(o,{host:"https://www.youtube.com",height:"360",width:"640",videoId:s,playerVars:{rel:0,origin:l,showinfo:0,modestbranding:1,start:r},events:{onReady:f,onStateChange:m,onError:h}}),wrapperid:t}}else if(i.hasClass("vimeo"))if("undefined"!=typeof Vimeo){var d=g("#"+o).get(0),c=new Vimeo.Player(d);w[o]={video:c,wrapperid:t},c.ready().then(function(){i.removeClass("loading")}),g(document.body).on("click","#"+t+".paused  .video-placeholder",function(){var e=g("#"+t+" .play-video-btn");i.addClass("loading"),c.play().then(function(){e.focus()}).catch(function(e){console.error("error playing the video:",e.name)})}),g(document.body).on("click","#"+t+" .play-video-btn",function(){i.hasClass("paused")?(i.addClass("loading"),c.play()):c.pause()}),c.getVideoTitle().then(function(e){a.attr("title",e)}),c.on("play",function(){i.removeClass("loading paused"),n.attr("aria-label",_theme_config.strings.pause_video)}),c.on("pause",function(){n.attr("aria-label",_theme_config.strings.play_video),i.addClass("paused")})}else g(".wp-block-embed.is-provider-vimeo").removeClass("loading paused"),g(".wp-block-embed.is-provider-vimeo .play-video-btn").remove();p++})};function p(e){var t;return!!(t=t||document.createElement("video")).canPlayType&&t.canPlayType({ogg:'video/ogg; codecs="theora"',h264:'video/mp4; codecs="avc1.42E01E"',webm:'video/webm; codecs="vp8, vorbis"',vp9:'video/webm; codecs="vp9"',hls:'application/x-mpegURL; codecs="avc1.42E01E"'}[e]||e)}function b(e){var t,n,o=e.find(".marker"),i={zoom:e.data("zoom")||16,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0},a=new google.maps.Map(e[0],i);return a.markers=[],o.each(function(){!function(e,t){var n=e.data("lat"),o=e.data("lng"),i={lat:parseFloat(n),lng:parseFloat(o)},a=new google.maps.Marker({position:i,map:t});if(t.markers.push(a),e.html()){var s=new google.maps.InfoWindow({content:e.html()});google.maps.event.addListener(a,"click",function(){s.open(t,a)})}}(g(this),a)}),t=a,n=new google.maps.LatLngBounds,t.markers.forEach(function(e){n.extend({lat:e.position.lat(),lng:e.position.lng()})}),1==t.markers.length?t.setCenter(n.getCenter()):t.fitBounds(n),a}g(function(){d.addClass("js-loaded");function e(){var e=.01*g(window).height();document.documentElement.style.setProperty("--vh",e+"px")}e();function n(e,t){var n=g(e);setTimeout(function(){g("html, body").animate({scrollTop:n.offset().top-t},500)},600)}g(document.body).on("click","a.anchorlink, .anchorlink a",function(e){e.preventDefault();var t=g(this).attr("href");g(this).hasClass("table-of-contents-link")?n(t,140):n(t,0)});var t=function(e,t,n){var o=new Date,i="";n&&(o.setTime(o.getTime()+864e5*n),i=";expires="+o.toUTCString()),document.cookie=e+"="+t+i+";path=/"};g(document.body).on("click","#accept-cookies",function(){g("#cookies-notification").addClass("hidden"),t("privacy_acceptance",1,90),setTimeout(function(){g("#cookies-notification").remove()},500)}),g(document.body).on("click",".toggle-menu",function(){c.hasClass("open")?(c.removeClass("open"),d.removeClass("oh")):(c.addClass("open"),d.addClass("oh"))}),g(document.body).on("click","#full-menu .toggle-submenu",function(e){g(window).width()<992&&(e.preventDefault(),g(this).closest("li").find(".sub-menu").slideToggle(250),g(this).toggleClass("open"))});function o(){d.hasClass("home")&&(50<window.pageYOffset||50<document.documentElement.scrollTop||50<document.body.scrollTop?c.addClass("fixed"):c.removeClass("fixed"))}o();function i(a){a.on("init",function(e,t){var n=a.closest(".gallery-container.with-pagination").find(".slides-counter"),o=t.slideCount;0<n.length?n.removeClass("hidden"):(o<10&&(o="0"+o),1<o&&a.closest(".gallery-container.with-pagination").append('<div class="slides-counter"><span>01</span>/'+o+"</div>")),setTimeout(function(){a.removeClass("hidden")},600)}),a.on("init reInit afterChange",function(e,t,n){var o=(n||0)+1;o<10&&(o="0"+o),a.closest(".gallery-container.with-pagination").find(".slides-counter span").text(o),function(e){if(0<(e=e||g("video")).length)for(var t=e.filter(function(){var e=g(this)[0];return!(g(this).attr("autoplay")&&e.muted||e.paused)}),n=t.length-1;0<=n;n--)t[n].pause()}(a.find("video"));var i=a.find(".slides-counter video");0<i.length&&i.get(0).play}),a.imagesLoaded(function(){a.closest(".gallery-container").hasClass("with-pagination")?a.slick({dots:!1,arrows:!0,infinite:!0,speed:600,adaptiveHeight:!0}):a.slick({dots:!0,arrows:!0,infinite:!0,speed:600,adaptiveHeight:!0})})}g(".gallery-slider, .slider-gallery .gallery").each(function(){var t=g(this);i(t),t.slickLightbox({src:"src",itemSelector:".slide img",slick:function(e){var i=parseInt(t.find(".slick-current").attr("data-slick-index"),10);return e.find(".slick-lightbox-slick").on("init",function(e,t){var n=t.slideCount,o=(i||0)+1;n<10&&(n="0"+n),o<10&&(o="0"+o),g(this).find(".slick-dots").after('<div class="slides-counter"><span>'+o+"</span>/"+n+"</div>"),g("html").hasClass("objectfit")||g("html").hasClass("object-fit")||g(".slick-lightbox-slick-item-inner").each(function(){var e=g(this),t=e.find("img").prop("src");t&&e.css("background-image","url("+t+")").addClass("custom-object-fit")})}).on("reInit afterChange",function(e,t,n){var o=(n||0)+1;o<10&&(o="0"+o),g(this).find(".slides-counter span").text(o)}).slick({dots:!0,arrows:!0,initialSlide:i||0})}})}),g(".homepage-slider .gallery").on("init",function(){setTimeout(function(){g(".homepage-slider .gallery").removeClass("hidden"),g(".homepage-slider").removeClass("hidden")},600)}),g(".homepage-highlights .gallery").on("init",function(){setTimeout(function(){g(".homepage-highlights .gallery").removeClass("hidden")},600)}),g(".homepage-slider .gallery, .homepage-highlights .gallery").slick({dots:!1,arrows:!0,infinite:!0,speed:600,slidesToScroll:1,fade:!0,cssEase:"linear",prevArrow:l,nextArrow:r,autoplay:!0,autoplaySpeed:6e3}),g(".kb-video:not(.pageload-video) .video-wrapper, .wp-block-video").kobuvideo({svgbutton:u});function a(){g(".responsive-spacer.size-custom").each(function(){var e,t,n,o,i=g(this),a=(e=i,t=g(window).width(),o=e,n=(n=t<=768?o.attr("data-small"):1900<=t?o.attr("data-large"):o.attr("data-medium"))?parseInt(n,10):0);i.css("height",a)})}a(),g(document.body).off("wpcf7mailsent").on("wpcf7mailsent",function(e){var t=e.detail.id;if(window.ga&&g("#"+t+" input.eventCategory").length&&g("#"+t+" input.eventAction").length&&g("#"+t+" input.eventLabel").length){var n=g("#"+t+" input.eventCategory").val(),o=g("#"+t+" input.eventAction").val(),i=g("#"+t+" input.eventLabel").val();ga("send","event",n,o,i)}}),g(".upload-file-group").length&&(g(document.body).on("click",".upload-file-group .upload-file-btn",function(){g(this).closest(".upload-file-group").find(".upload-file-input").click()}),g(document.body).on("change",".upload-file-group .upload-file-input",function(){var e=g(this).val(),t="";if(e){var n=0<=e.indexOf("\\")?e.lastIndexOf("\\"):e.lastIndexOf("/");0!==(t=e.substring(n)).indexOf("\\")&&0!==t.indexOf("/")||(t=t.substring(1))}else t=_theme_config.strings.cv_here;g(this).closest(".upload-file-group").find(".file-name").text(t)})),g(".acf-map").each(function(){b(g(this))}),g(".dropdown-group").length&&d.hasClass("mobile")&&g(document.body).on("click",".dropdown-group",function(){g(this).toggleClass("open")}),g(".lang-selector-group").length&&d.hasClass("mobile")&&g(document.body).on("click",".lang-selector-group",function(){g(this).toggleClass("open")}),g(document.body).on("click",".sidebar .toggle-pages-menu",function(){g(".sidebar .sidebar-pages-wrapper").toggleClass("open")});function s(){g(".sidebar-page-content-wrapper").each(function(){var e=g(this),t=e.find(".sidebar");if(0<t.length){var n=e.offset().top,o=t.find(".sidebar-wrapper"),i=o.outerHeight(),a=n+e.outerHeight(),s=g(window).scrollTop(),l=992<g(window).width()?c.height()+30:c.height(),r=t.find(".sidebar-pages-wrapper"),d=parseInt(g(".sidebar-page-content").css("padding-bottom"),10);t.css({"min-height":i}),n<=s+l?(o.css({width:992<g(window).width()?t.width():"100%"}),r.css({"max-height":992<g(window).width()?"":g(window).height()-l-i+"px"}),992<g(window).width()&&a<s+l+i||g(window).width()<=992&&a<s+l?(o.removeClass("fixed").addClass("absolute"),o.css({bottom:992<g(window).width()?0:-d+"px",top:"",left:""})):(o.removeClass("absolute").addClass("fixed"),o.css({bottom:"",top:l,left:t.offset().left}))):(o.removeClass("fixed absolute"),o.css({top:"",bottom:"",width:"",left:""}))}})}s();g(".mc4wp-form-fields").length&&(_theme_config.newsletter_strings.fname&&_theme_config.newsletter_strings.fname_placeholder&&(g(".newsletter-fname-input label").text(_theme_config.newsletter_strings.fname),g(".newsletter-fname-input input").attr("placeholder",_theme_config.newsletter_strings.fname_placeholder)),_theme_config.newsletter_strings.lname&&_theme_config.newsletter_strings.lname_placeholder&&(g(".newsletter-lname-input label").text(_theme_config.newsletter_strings.lname),g(".newsletter-lname-input input").attr("placeholder",_theme_config.newsletter_strings.lname_placeholder)),_theme_config.newsletter_strings.email&&_theme_config.newsletter_strings.email_placeholder&&(g(".newsletter-email-input label").text(_theme_config.newsletter_strings.email),g(".newsletter-email-input input").attr("placeholder",_theme_config.newsletter_strings.email_placeholder)),_theme_config.newsletter_strings.terms&&g(".newsletter-terms-input label").html(_theme_config.newsletter_strings.terms),_theme_config.newsletter_strings.collect_personal_data&&g(".newsletter-personal-data-input label").html(_theme_config.newsletter_strings.collect_personal_data),_theme_config.newsletter_strings.subscribe_newsletter&&g(".newsletter-subscribe").val(_theme_config.newsletter_strings.subscribe_newsletter)),g(window).on("resize",function(){e(),a(),s(),992<=g(window).width()&&(g("#full-menu .sub-menu").css("display",""),g("#full-menu .toggle-submenu").removeClass("open"))}),g(window).on("scroll",function(){o(),s()})}),g(window).on("load",function(){g(".pageload-video:not(.video-loaded)").each(function(){var e=g(this),t=e.data("settings");e.addClass("video-loaded");var n,o,i=0;t.webm&&p("vp9")?(n=t.webm,o="webm"):t.mp4&&p("h264")?(n=t.mp4,o="mp4"):t.ogg&&p("ogg")?(n=t.ogg,o="ogg"):i++;var a=e.find(".video-placeholder");a.length?a.wrap('<div class="video-wrapper"></div>'):e.prepend('<div class="video-wrapper"></div>');var s=e.find(".video-wrapper");if(i)s.addClass("error");else{var l=document.createElement("video");l.autoplay=t.autoplay,l.controls=t.controls,l.loop=t.loop,l.muted=t.muted,l.preload=t.preload,l.playsinline=!0,t.autoplay&&l.setAttribute("autoplay","");var r=document.createElement("source");if(r.type="video/"+o,r.src=n,l.appendChild(r),t.track){var d=document.createElement("track");d.kind=t.trackKind,d.srclang=t.trackSrclang,d.default=!0,d.src=t.track,l.appendChild(d)}if(s.append(l),s.find("video").get(0).load(),l.controls&&!t.autoplay)s.kobuvideo({svgbutton:u,fullscreen:!1});else s.find("video").get(0).paused?s.kobuvideo({svgbutton:u,fullscreen:!1}):a.length&&a.remove()}})})}(jQuery);
!function(l){"use strict";function o(){var e=l("video");if(0<e.length)for(var t=e.filter(function(){var e=l(this)[0];return!(l(this).attr("autoplay")&&e.muted||e.paused)}),o=t.length-1;0<=o;o--)t[o].pause()}function s(){var e=l("video");if(0<e.length)for(var t=e.length-1;0<=t;t--)!e[t].paused&&e[t].muted&&e[t].pause()}function e(e){var t;return!!(t=t||document.createElement("video")).canPlayType&&t.canPlayType({ogg:'video/ogg; codecs="theora"',h264:'video/mp4; codecs="avc1.42E01E"',webm:'video/webm; codecs="vp8, vorbis"',vp9:'video/webm; codecs="vp9"',hls:'application/x-mpegURL; codecs="avc1.42E01E"'}[e]||e)}function i(e,t){var n=this;n.defaults={playPause:!0,stop:!1,sound:!0,fullscreen:!0,restart:!1,progress:!1,subtitles:!1,svgbutton:'<svg width="43" height="48" viewBox="0 0 43 48" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M168 1419L168 1463 208 1441.00105z" transform="translate(-167 -1417)" fill="#F3E0E0" stroke="#F3E0E0" stroke-width="2" fill-rule="evenodd"/></svg>',hidecontrols:!0,hasControls:null},n.options=l.extend({},n.defaults,t),n.initials={$videoWrapper:l(e),$videoElem:null,$video:null,$play:null,$playPause:null,$stop:null,$progress:null,$sound:null,$fullscreen:null,$restart:null,videoPlayed:!1,canPlay:!1,playWhenLoaded:!1},l.extend(n,n.initials),n.listenerFunctions={error:function(){n.$videoWrapper.addClass("error")},pauseListener:function(){n.$videoWrapper.addClass("paused"),n.$playPause.text(_theme_config.strings.play_video).removeClass("pause").addClass("play")},playListener:function(){n.$videoWrapper.removeClass("loading"),n.$videoWrapper.removeClass("paused"),n.$playPause.text(_theme_config.strings.pause_video).removeClass("play").addClass("pause"),n.videoPlayed=!0},timeupdateListener:function(){var e=n.$progress.find(".progress-bar .progress"),t=n.$progress.find(".current-time"),o=n.$video.currentTime;e.attr("data-current",o),t.text(function(e){var t=Math.floor(e/3600);e-=3600*t;var o=Math.floor(e/60);return 3600<(e-=60*o)?t+":"+(o<10?"0"+o:o)+":"+(e<10?"0"+e:e):o+":"+(e<10?"0"+e:e)}(Math.round(o))),e.css("width",o/n.$video.duration*100+"%")},fullscreenListeners:{fullscreenchange:function(){document.fullScreen||document.fullscreenElement||n.exitFullscreen()},webkitfullscreenchange:function(){document.webkitIsFullScreen||n.exitFullscreen()},mozfullscreenchange:function(){document.mozFullScreen||n.exitFullscreen()},msfullscreenchange:function(){document.msFullscreenElement||n.exitFullscreen()}}},n.init()}var r=e("vp9")||e("h264");i.prototype.init=function(){var e=this;l(e.$videoWrapper).hasClass("video-initialized")||(l(e.$videoWrapper).addClass("video-initialized"),e.$videoElem=e.$videoWrapper.find("video"),e.$video=e.$videoElem.get(0),(!Modernizr.objectfit||-1<window.navigator.userAgent.indexOf("Edge"))&&e.$videoElem.addClass("no-objectfit"),r&&(0<l(e.$videoWrapper).find("track").length&&(e.options.subtitles=!0),e.buildVideoElements(),e.initializeEvents()))},i.prototype.buildVideoElements=function(){var e,t,o=this,n="";e=!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),o.$videoWrapper.hasClass("video-wrapper")||(o.$videoElem.wrap('<div class="video-wrapper"></div>'),o.$videoWrapper=o.$videoWrapper.find(".video-wrapper")),o.$videoWrapper.addClass("loading paused"),t=null===o.options.hasControls?o.$videoElem.attr("controls"):o.options.hasControls,o.$videoElem.removeAttr("controls"),o.$videoElem.removeAttr("preload"),o.$videoElem.removeAttr("height"),o.$videoElem.removeAttr("width"),o.$videoElem.attr("playsinline",!0),n+='<button type="button" class="play-video-btn" aria-label="'+_theme_config.strings.play_video+'">'+o.options.svgbutton+"</button>",t&&(n+='<div class="video-controls">',n+='<div class="video-controls-wrapper">',o.options.playPause&&(n+='<button type="button" class="play-pause play">'+_theme_config.strings.play_video+"</button>"),o.options.stop&&(n+='<button type="button" class="stop">'+_theme_config.strings.stop_video+"</button>"),o.options.progress&&(n+='<div class="progress-bar-wrapper"><div class="current-time" aria-label="'+_theme_config.strings.current_time+'">0:00</div><div class="progress-bar"><div class="bar"></div><div class="progress"></div></div></div>'),o.options.sound&&(o.$video.muted?n+='<button type="button" class="mute muted">'+_theme_config.strings.unmute+"</button>":n+='<button type="button" class="mute">'+_theme_config.strings.mute+"</button>"),o.options.restart&&(n+='<button type="button" class="restart">'+_theme_config.strings.restart+"</button>"),o.options.fullscreen&&e&&(n+='<button type="button" class="fullscreen">'+_theme_config.strings.fullscreen+"</button>"),n+="</div>",n+="</div>"),o.$videoWrapper.append(n),o.$play=o.$videoWrapper.find(".play-video-btn"),o.options.playPause&&(o.$playPause=o.$videoWrapper.find(".video-controls .play-pause")),o.options.stop&&(o.$stop=o.$videoWrapper.find(".video-controls .stop")),o.options.progress&&(o.$progress=o.$videoWrapper.find(".video-controls .progress-bar-wrapper")),o.options.sound&&(o.$sound=o.$videoWrapper.find(".video-controls .mute")),o.options.fullscreen&&e&&(o.$fullscreen=o.$videoWrapper.find(".video-controls .fullscreen")),o.options.restart&&(o.$restart=o.$videoWrapper.find(".video-controls .restart"))},i.prototype.initializeEvents=function(){var s=this,e=s.$videoWrapper.find("source:last-child")[0];e?e.addEventListener("error",s.listenerFunctions.error,!1):s.$video.addEventListener("error",s.listenerFunctions.error,!1),s.$video.addEventListener("pause",s.listenerFunctions.pauseListener,!1),s.$video.addEventListener("play",s.listenerFunctions.playListener,!1),s.options.progress&&s.$video.addEventListener("timeupdate",s.listenerFunctions.timeupdateListener,!1);function t(){s.$videoWrapper.removeClass("loading"),s.canPlay=!0,(s.playWhenLoaded||s.$videoElem.attr("autoplay"))&&s.$videoElem.is(":in-viewport")&&(s.playVideo("no-focus"),s.$videoWrapper.hasClass("paused")||s.$playPause.text(_theme_config.strings.pause_video).removeClass("play").addClass("pause"))}if(2<=s.$video.readyState?t():(s.$video.addEventListener("loadeddata",function e(){t(),s.$video.removeEventListener("loadeddata",e)}),s.$video.load()),s.options.subtitles){var o=s.$video.textTracks;if(o.length){var n=o[0];if(n){n.mode="hidden",s.$videoWrapper.find(".subtitles").length||s.$videoWrapper.append('<div class="subtitles" aria-hidden="true"></div>');var i=s.$videoWrapper.find(".subtitles");l(n).on("cuechange",function(){var e=n.activeCues[0];e&&(""!==e.text&&i.html("<span>"+e.text+"</span>").addClass("visible"),l(e).on("exit",function(){i.removeClass("visible"),l(e).off("exit")}))})}}else s.options.subtitles=!1}if(s.options.hidecontrols&&(l("body").hasClass("mobile")?s.$videoElem.on("click touchend",function(e){s.$videoWrapper.toggleClass("show-controls"),e.cancelable&&(e.preventDefault(),e.stopPropagation())}):(s.$videoWrapper.on("mouseenter",function(){s.$videoWrapper.addClass("show-controls")}),s.$videoWrapper.on("mouseleave",function(){s.$videoWrapper.removeClass("show-controls")}))),s.$play&&s.$play.on("click",function(){s.$videoElem.removeClass("no-autoplay"),s.playVideo(),l("body").hasClass("mobile")&&s.options.hidecontrols&&s.$videoWrapper.removeClass("show-controls")}),s.$playPause&&s.$playPause.on("click",function(){s.playPauseVideo()}),s.$stop&&s.$stop.on("click",function(){s.$video.pause(),s.$videoWrapper.addClass("paused"),s.$video.currentTime=0}),s.$progress){var r=s.$progress.find(".progress-bar");r.on("click",function(e){var t=r.offset().left,o=t+r.width(),n=(e.pageX-t)/(o-t)*s.$video.duration;s.$video.currentTime=n,s.$progress.find(".progress").css("width",n/s.$video.duration*100+"%")})}s.$restart&&s.$restart.on("click",function(){s.$video.currentTime=0,s.$videoWrapper.removeClass("paused"),s.$video.play()}),s.$sound&&s.$sound.on("click",function(){s.$video.muted?(s.$video.muted=!1,s.$sound.text(_theme_config.strings.mute).removeClass("muted")):(s.$video.muted=!0,s.$sound.text(_theme_config.strings.unmute).addClass("muted"))}),s.$fullscreen&&s.$fullscreen.on("click",function(){s.handleFullscreen()}),document.addEventListener("fullscreenchange",s.listenerFunctions.fullscreenListeners.fullscreenchange),document.addEventListener("webkitfullscreenchange",s.listenerFunctions.fullscreenListeners.webkitfullscreenchange),document.addEventListener("mozfullscreenchange",s.listenerFunctions.fullscreenListeners.mozfullscreenchange),document.addEventListener("msfullscreenchange",s.listenerFunctions.fullscreenListeners.msfullscreenchange)},i.prototype.playPauseVideo=function(){var e=this;e.$video.paused?(e.$videoElem.removeClass("no-autoplay"),e.playVideo()):(e.$videoElem.addClass("no-autoplay"),e.pauseVideo())},i.prototype.restartVideo=function(){var e=this;if(e.canPlay){o(),e.$video.currentTime=0;var t=e.$video.play();void 0!==t&&t.then(function(){e.$video.paused||(e.$videoWrapper.removeClass("paused"),e.$playPause.text(_theme_config.strings.pause_video))}).catch(function(){}),setTimeout(function(){e.$playPause&&e.$playPause[0].focus({preventScroll:!0})},300)}else e.playWhenLoaded=!0},i.prototype.playVideo=function(e){var t=this;e=e||"focus",t.canPlay?(o(),t.$video.play(),t.$video.paused?t.$videoElem.addClass("no-autoplay"):(t.$videoWrapper.removeClass("paused"),t.$playPause.text(_theme_config.strings.pause_video)),"focus"==e&&setTimeout(function(){t.$playPause&&t.$playPause[0].focus({preventScroll:!0})},300)):t.playWhenLoaded=!0},i.prototype.pauseVideo=function(){var e=this;e.$video.pause(),e.$videoWrapper.addClass("paused"),e.$playPause.text(_theme_config.strings.play_video),setTimeout(function(){e.$playPause&&e.$playPause[0].focus({preventScroll:!0})},300)},i.prototype.exitFullscreen=function(){var e=this;e.$sound&&(e.$video.muted?e.$sound.text(_theme_config.strings.mute).addClass("muted"):e.$sound.text(_theme_config.strings.unmute).removeClass("muted")),e.$videoWrapper.removeClass("fullscreen")},i.prototype.handleFullscreen=function(){var e=this;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():(e.$video.requestFullscreen?e.$video.requestFullscreen():e.$video.mozRequestFullScreen?e.$video.mozRequestFullScreen():e.$video.webkitRequestFullScreen?e.$video.webkitRequestFullScreen():e.$video.msRequestFullscreen&&e.$video.msRequestFullscreen(),e.$videoWrapper.addClass("fullscreen"))},i.prototype.clearEvents=function(){var e=this,t=e.$videoWrapper.find("source:last-child")[0];t?t.removeEventListener("error",e.listenerFunctions.error,!1):e.$video.removeEventListener("error",e.listenerFunctions.error,!1),e.$video.removeEventListener("pause",e.listenerFunctions.pauseListener,!1),e.$video.removeEventListener("play",e.listenerFunctions.playListener,!1),e.options.subtitles&&l(e.$video.textTracks[0]).off("cuechange"),e.options.progress&&e.$video.removeEventListener("timeupdate",e.listenerFunctions.timeupdateListener,!1),e.options.hidecontrols&&(l("body").hasClass("mobile")?e.$videoElem.off("click touchend"):(e.$videoWrapper.off("mouseenter"),e.$videoWrapper.off("mouseleave"))),e.$play&&e.$play.off("click"),e.$playPause&&e.$playPause.off("click"),e.$stop&&e.$stop.off("click"),e.$progress&&e.$progress.find(".progress-bar").off("click");e.$restart&&e.$restart.off("click"),e.$sound&&e.$sound.off("click"),e.$fullscreen&&e.$fullscreen.off("click"),document.removeEventListener("fullscreenchange",e.listenerFunctions.fullscreenListeners.fullscreenchange),document.removeEventListener("webkitfullscreenchange",e.listenerFunctions.fullscreenListeners.webkitfullscreenchange),document.removeEventListener("mozfullscreenchange",e.listenerFunctions.fullscreenListeners.mozfullscreenchange),document.removeEventListener("msfullscreenchange",e.listenerFunctions.fullscreenListeners.msfullscreenchange)},l.fn.kobuvideo=function(){var e,t,o=this,n=arguments[0],s=o.length;for(e=0;e<s;e++)if("object"==typeof n||void 0===n)o[e].kobuvideo=new i(o[e],n);else if(r&&void 0!==(t=o[e].kobuvideo[n].apply(o[e].kobuvideo)))return t;return o};function a(){l("video").each(function(){var e=l(this)[0];l(this).is(":in-viewport")?!l(this).hasClass("no-autoplay")&&l(this).attr("autoplay")&&e.paused&&e.play():!e.paused&&e.muted&&e.pause()})}l(document).ready(function(){l(window).on("scroll",function(){a()}),window.addEventListener("focus",a),window.addEventListener("blur",s);var e,t=0,o=!1,n=setInterval(e,6e4);e=function(){20<++t&&(function(){var e=l("video");if(0<e.length)for(var t=e.length-1;0<=t;t--)e[t].paused||e[t].pause()}(),o=!0,t=0,clearInterval(n))},l(window).on("mousemove scroll keypress focus",function(){t=0,o&&(o=!1,n=setInterval(e,6e4),a())})})}(jQuery);